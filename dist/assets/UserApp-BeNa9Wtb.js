import{r as c,j as e,N as $,u as Le,O as Me,L as ae,a as Y,R as Oe,b as D}from"./index-DDRys4sO.js";import{p as re,c as k,A as Q,m as w,L as G,E as z,a as _,S as Te,P as V,b as ce,d as H,M as K,e as ie,f as De,g as Ee,v as Be,h as U,T as Fe,i as Re,X as oe,j as ue,C as $e,k as Ue,U as ze,B as _e,l as ye,n as qe}from"./localOrders-Bi3-Qt_Q.js";const je=c.createContext(void 0),E=()=>{const s=c.useContext(je);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},We=({children:s})=>{const[t,r]=c.useState(null);c.useEffect(()=>{const j=localStorage.getItem("bever_user");if(j)try{const h=JSON.parse(j);r(h)}catch(h){console.error("Error parsing saved user data:",h),localStorage.removeItem("bever_user")}},[]);const n={user:t,login:j=>{r(j),localStorage.setItem("bever_user",JSON.stringify(j))},logout:()=>{r(null),localStorage.removeItem("bever_user"),localStorage.removeItem("bever_pin"),localStorage.removeItem("bever_cart")},updateUser:j=>{if(t){const h={...t,...j};r(h),localStorage.setItem("bever_user",JSON.stringify(h))}},isAuthenticated:!!t};return e.jsx(je.Provider,{value:n,children:s})},be=c.createContext(void 0),de=()=>{const s=c.useContext(be);if(s===void 0)throw new Error("usePin must be used within a PinProvider");return s},Je=({children:s})=>{const{user:t,updateUser:r}=E(),[u,o]=c.useState(!1);c.useEffect(()=>{if(t){const i=!!localStorage.getItem(`bever_pin_${t.id}`);o(i),t.hasPin!==i&&r({hasPin:i})}else o(!1)},[t,r]);const x=N=>{t&&N.length>=4&&N.length<=6&&(localStorage.setItem(`bever_pin_${t.id}`,N),o(!0),r({hasPin:!0}))},n=N=>t?localStorage.getItem(`bever_pin_${t.id}`)===N:!1,d={hasPin:u,isSettingRequired:!!(t&&!u),setPin:x,verifyPin:n,changePin:(N,i)=>!t||!n(N)||i.length<4||i.length>6?!1:(localStorage.setItem(`bever_pin_${t.id}`,i),!0),clearPin:()=>{t&&(localStorage.removeItem(`bever_pin_${t.id}`),o(!1),r({hasPin:!1}))}};return e.jsx(be.Provider,{value:d,children:s})},fe=c.createContext(void 0),W=()=>{const s=c.useContext(fe);if(s===void 0)throw new Error("useCart must be used within a CartProvider");return s},Ve=({children:s})=>{const{user:t}=E(),[r,u]=c.useState([]);c.useEffect(()=>{if(t){const i=localStorage.getItem(`bever_cart_${t.id}`);if(i)try{u(JSON.parse(i))}catch(p){console.error("Error parsing saved cart:",p)}}else u([])},[t]),c.useEffect(()=>{t&&localStorage.setItem(`bever_cart_${t.id}`,JSON.stringify(r))},[r,t]);const o=(i,p=1)=>{const g=re.find(l=>l.id===i);g&&u(l=>l.find(b=>b.productId===i)?l.map(b=>b.productId===i?{...b,quantity:b.quantity+p}:b):[...l,{productId:i,quantity:p,price:g.price}])},x=i=>{u(p=>p.filter(g=>g.productId!==i))},N={items:r,addItem:o,removeItem:x,updateQuantity:(i,p)=>{if(p<=0){x(i);return}u(g=>g.map(l=>l.productId===i?{...l,quantity:p}:l))},clearCart:()=>{u([])},getTotalItems:()=>r.reduce((i,p)=>i+p.quantity,0),getTotalPrice:()=>r.reduce((i,p)=>i+p.price*p.quantity,0),getCartItemsWithDetails:()=>r.map(i=>({...i,product:re.find(p=>p.id===i.productId)}))};return e.jsx(fe.Provider,{value:N,children:s})},Ge=({children:s})=>{const{isAuthenticated:t}=E();return t?e.jsx(e.Fragment,{children:s}):e.jsx($,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=k("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=k("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=k("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=k("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=k("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=k("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=k("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=k("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=k("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=k("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=k("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=k("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=k("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=k("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=k("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=k("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=k("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=k("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=k("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=k("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=k("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),os=({isOpen:s})=>{const{setPin:t}=de(),[r,u]=c.useState(""),[o,x]=c.useState(""),[n,j]=c.useState(!1),[h,m]=c.useState(""),[d,N]=c.useState("create"),i=l=>{l.length<=6&&/^\d*$/.test(l)&&(d==="create"?(u(l),m("")):(x(l),m("")))},p=()=>{if(d==="create"){if(r.length<4){m("PIN must be at least 4 digits");return}N("confirm")}else{if(r!==o){m("PINs do not match");return}t(r)}},g=()=>{N("create"),x(""),m("")};return e.jsx(Q,{children:s&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(G,{className:"w-8 h-8 text-accent"})}),e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:d==="create"?"Create Transaction PIN":"Confirm PIN"}),e.jsx("p",{className:"text-primary-600",children:d==="create"?"Set up a 4-6 digit PIN to secure your transactions":"Please confirm your PIN"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:d==="create"?r:o,onChange:l=>i(l.target.value),placeholder:d==="create"?"Enter PIN":"Confirm PIN",className:"input-field text-center text-2xl tracking-widest pr-12",maxLength:6,autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>j(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-400 hover:text-primary-600",children:n?e.jsx(z,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})})]}),h&&e.jsx(w.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:h}),e.jsxs("div",{className:"flex gap-3",children:[d==="confirm"&&e.jsx("button",{onClick:g,className:"btn-secondary flex-1",children:"Back"}),e.jsx("button",{onClick:p,disabled:d==="create"?r.length<4:o.length<4,className:"btn-primary flex-1",children:d==="create"?"Continue":"Set PIN"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-primary-500",children:"Your PIN is stored securely and is required for all transactions"})})]})})})},ds=()=>{const s=Le(),{getTotalItems:t}=W(),r=t(),u=[{path:"/home",icon:as,label:"Home"},{path:"/cart",icon:Te,label:"Cart",badge:r},{path:"/orders",icon:V,label:"Orders"},{path:"/profile",icon:me,label:"Profile"}],o=x=>s.pathname===x;return e.jsxs("div",{className:"min-h-screen bg-primary-50",children:[e.jsx("main",{className:"pb-20",children:e.jsx(Me,{})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-primary-200 px-4 py-2 z-40",children:e.jsx("div",{className:"flex justify-around items-center max-w-md mx-auto",children:u.map(({path:x,icon:n,label:j,badge:h})=>{const m=h??0;return e.jsxs(ae,{to:x,className:"relative flex flex-col items-center py-2 px-3 rounded-xl transition-all duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:`w-6 h-6 transition-colors duration-200 ${o(x)?"text-primary-950":"text-primary-400"}`}),m>0&&e.jsx(w.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 bg-accent text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:m>99?"99+":m})]}),e.jsx("span",{className:`text-xs mt-1 transition-colors duration-200 ${o(x)?"text-primary-950 font-medium":"text-primary-400"}`,children:j}),o(x)&&e.jsx(w.div,{layoutId:"activeTab",className:"absolute -top-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-primary-950 rounded-full"})]},x)})})})]})},ms=()=>{const s=Y(),{login:t}=E(),[r,u]=c.useState({phoneNumber:"",pin:""}),[o,x]=c.useState(!1),[n,j]=c.useState(!1),[h,m]=c.useState(""),d=i=>{const{name:p,value:g}=i.target;u(l=>({...l,[p]:g})),m("")},N=async i=>{i.preventDefault(),j(!0),m("");try{await new Promise(g=>setTimeout(g,1e3));const p={id:"1",businessName:"Masakai",businessAddress:"123 Demo Street, Jalingo",ward:"Abbare Yelwa",subArea:"Abbare",customerCategory:"Office",phoneNumber:r.phoneNumber,beverCode:"JAL-01-OF-0001",verificationStatus:"Verified",createdAt:new Date,hasPin:!0};t(p),s("/home")}catch{m("Invalid phone number or PIN")}finally{j(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsx("div",{className:"pt-12 pb-8 px-6",children:e.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center justify-center gap-3 mb-2",children:[e.jsx("img",{src:"/favicon.png",alt:"Bever logo",className:"w-10 h-10 rounded-sm"}),e.jsx("h1",{className:"text-4xl font-bold text-primary-950",children:"Bever"})]}),e.jsx("p",{className:"text-primary-600",children:"Premium beverages delivered"})]})}),e.jsx("div",{className:"flex-1 px-6",children:e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"max-w-md mx-auto",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:r.phoneNumber,onChange:d,placeholder:"08012345678",className:"input-field pl-12",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Transaction PIN"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:o?"text":"password",name:"pin",value:r.pin,onChange:d,placeholder:"Enter your PIN",className:"input-field pl-12 pr-12",maxLength:6,required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-400 hover:text-primary-600",children:o?e.jsx(z,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})})]})]}),h&&e.jsx(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-red-600 text-sm",children:h})}),e.jsx("button",{type:"submit",disabled:n,className:"btn-primary w-full",children:n?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-primary-600",children:["Don't have an account?"," ",e.jsx(ae,{to:"/register",className:"text-primary-950 font-medium hover:underline",children:"Register here"})]})})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-primary-100 px-6 py-3 z-20",children:e.jsx("div",{className:"max-w-md mx-auto text-center",children:e.jsx(ae,{to:"/admin/login",className:"text-sm text-primary-950 font-medium hover:underline",children:"Admin? Sign in here"})})})]})},xs=[{name:"Abbare Yelwa",code:"JLG-W01",sub_areas:["Abbare","Kasuwan Yelwa","Sabongari","Tudun Wada"]},{name:"Barade",code:"JLG-W02",sub_areas:["Baraya","Dorowa","Pasli","Fan"]},{name:"Kachalla Sembe",code:"JLG-W03",sub_areas:["Kanbi","Kalanko","Murbai"]},{name:"Kona",code:"JLG-W04",sub_areas:["Kona Manga","Magani","Okona"]},{name:"Majidadi",code:"JLG-W05",sub_areas:["Jekadafari","Saurara","Petal"]},{name:"Mayo Goi",code:"JLG-W06",sub_areas:["Mayo Goi","Porni","Todiri"]},{name:"Sarkin Dawaki",code:"JLG-W07",sub_areas:["Sarkin Dawaki","Mallam Ali","Jauro Yeno"]},{name:"Sintali",code:"JLG-W08",sub_areas:["Sintali Ward","Iyabamuye","Hamdella"]},{name:"Turaki A",code:"JLG-W09",sub_areas:["Garin Kari","Mudibbo","Jauro Abba"]},{name:"Turaki B",code:"JLG-W10",sub_areas:["Garin Jalo","Jauro Awo","Pan"]}],se={wards:xs},hs=()=>{const s=Y(),{login:t}=E(),[r,u]=c.useState(1),[o,x]=c.useState(!1),[n,j]=c.useState({businessName:"",businessAddress:"",ward:"",subArea:"",customerCategory:"",phoneNumber:"",shopPhoto:null}),h=y=>{const{name:b,value:P}=y.target;j(C=>({...C,[b]:P})),b==="ward"&&j(C=>({...C,subArea:""}))},m=y=>{var P;const b=(P=y.target.files)==null?void 0:P[0];b&&j(C=>({...C,shopPhoto:b}))},d=()=>{const b=(se.wards.findIndex(I=>I.name===n.ward)+1).toString().padStart(2,"0"),P=n.customerCategory==="Office"?"OF":n.customerCategory==="Provision Store"?"PS":"HM",C=Math.floor(Math.random()*9999)+1;return`JAL-${b}-${P}-${C.toString().padStart(4,"0")}`},N=async()=>{x(!0);try{await new Promise(P=>setTimeout(P,2e3));const y=d(),b={id:Date.now().toString(),businessName:n.businessName,businessAddress:n.businessAddress,ward:n.ward,subArea:n.subArea,customerCategory:n.customerCategory,phoneNumber:n.phoneNumber,beverCode:y,verificationStatus:"Pending",shopPhoto:n.shopPhoto?URL.createObjectURL(n.shopPhoto):void 0,createdAt:new Date,hasPin:!1};t(b),s("/home")}catch(y){console.error("Registration failed:",y)}finally{x(!1)}},i=()=>{r<3?u(r+1):N()},p=()=>{r>1&&u(r-1)},g=()=>{switch(r){case 1:return n.businessName&&n.businessAddress&&n.ward&&n.customerCategory&&n.phoneNumber;case 2:return n.shopPhoto;case 3:return!0;default:return!1}},l=se.wards.find(y=>y.name===n.ward);return e.jsxs("div",{className:"min-h-screen bg-white mb-16",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:r===1?()=>s("/login"):p,className:"p-2 hover:bg-primary-100 rounded-xl transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-primary-700"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-semibold text-primary-950",children:"Register"}),e.jsxs("p",{className:"text-sm text-primary-600",children:["Step ",r," of 3"]})]}),e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"mt-4 bg-primary-100 rounded-full h-2",children:e.jsx(w.div,{className:"bg-primary-950 h-2 rounded-full",initial:{width:"33%"},animate:{width:`${r/3*100}%`},transition:{duration:.3}})})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs(Q,{mode:"wait",children:[r===1&&e.jsxs(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:"Business Information"}),e.jsx("p",{className:"text-primary-600",children:"Tell us about your business"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Business/Shop Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:"text",name:"businessName",value:n.businessName,onChange:h,placeholder:"Enter business name",className:"input-field pl-12",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Business Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 w-5 h-5 text-primary-400"}),e.jsx("textarea",{name:"businessAddress",value:n.businessAddress,onChange:h,placeholder:"Street address, landmark",className:"input-field pl-12 min-h-[80px] resize-none",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Ward *"}),e.jsxs("select",{name:"ward",value:n.ward,onChange:h,className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Ward"}),se.wards.map(y=>e.jsx("option",{value:y.name,children:y.name},y.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Sub Area"}),e.jsxs("select",{name:"subArea",value:n.subArea,onChange:h,className:"input-field",disabled:!l,children:[e.jsx("option",{value:"",children:"Select Sub Area"}),l==null?void 0:l.sub_areas.map(y=>e.jsx("option",{value:y,children:y},y))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Customer Category *"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Office","Provision Store","Home"].map(y=>e.jsx("button",{type:"button",onClick:()=>j(b=>({...b,customerCategory:y})),className:`p-3 rounded-xl border-2 text-sm font-medium transition-all ${n.customerCategory===y?"border-primary-950 bg-primary-950 text-white":"border-primary-200 text-primary-700 hover:border-primary-300"}`,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:n.phoneNumber,onChange:h,placeholder:"08012345678",className:"input-field pl-12",required:!0})]})]})]})]},"step1"),r===2&&e.jsxs(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:"Shop Photo"}),e.jsx("p",{className:"text-primary-600",children:"Upload a clear photo of your shop's entrance or facade"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed border-primary-200 rounded-2xl p-8 text-center",children:n.shopPhoto?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-200 rounded-full flex items-center justify-center mx-auto",children:e.jsx(q,{className:"w-10 h-10 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-950",children:"Photo uploaded successfully"}),e.jsx("p",{className:"text-sm text-primary-600",children:n.shopPhoto.name})]}),e.jsx("button",{type:"button",onClick:()=>j(y=>({...y,shopPhoto:null})),className:"btn-secondary",children:"Change Photo"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(R,{className:"w-10 h-10 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-950 mb-2",children:"Upload Shop Photo"}),e.jsx("p",{className:"text-sm text-primary-600 mb-4",children:"Take a clear photo showing your shop's building or entrance"}),e.jsxs("label",{className:"btn-primary cursor-pointer",children:["Choose Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"hidden"})]})]})]})}),e.jsxs("div",{className:"bg-accent-50 border border-primary-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-accent mb-2",children:"Photo Guidelines:"}),e.jsxs("ul",{className:"text-sm text-accent space-y-1",children:[e.jsx("li",{children:"• Ensure the shop name/signage is visible"}),e.jsx("li",{children:"• Take the photo during daylight for clarity"}),e.jsx("li",{children:"• Include the full entrance or facade"}),e.jsx("li",{children:"• Avoid blurry or dark images"})]})]})]})]},"step2"),r===3&&e.jsxs(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:"Review Information"}),e.jsx("p",{className:"text-primary-600",children:"Please review your information before submitting"})]}),e.jsxs("div",{className:"card space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-950 mb-3",children:"Business Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Business Name:"}),e.jsx("span",{className:"text-primary-950 font-medium",children:n.businessName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Category:"}),e.jsx("span",{className:"text-primary-950 font-medium",children:n.customerCategory})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Ward:"}),e.jsx("span",{className:"text-primary-950 font-medium",children:n.ward})]}),n.subArea&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Sub Area:"}),e.jsx("span",{className:"text-primary-950 font-medium",children:n.subArea})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Phone:"}),e.jsx("span",{className:"text-primary-950 font-medium",children:n.phoneNumber})]})]})]}),e.jsx("div",{className:"border-t border-primary-100 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Shop Photo:"}),e.jsx("span",{className:"text-accent font-medium",children:"✓ Uploaded"})]})})]}),e.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-primary-950 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-primary-700 space-y-1",children:[e.jsx("li",{children:"• You'll receive a unique Bever Code"}),e.jsx("li",{children:"• Your account will be pending verification"}),e.jsx("li",{children:"• You can start browsing and ordering immediately"}),e.jsx("li",{children:"• Verification typically takes 24-48 hours"})]})]})]},"step3")]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-primary-100 p-6",children:e.jsx("button",{onClick:i,disabled:!g()||o,className:"btn-primary w-full",children:o?"Creating Account...":r===3?"Create Account":"Continue"})})]})]})},ps=()=>{const{user:s}=E(),{addItem:t,updateQuantity:r,getCartItemsWithDetails:u}=W(),[o,x]=c.useState(""),[n,j]=c.useState(""),[h,m]=c.useState([]),[d,N]=c.useState([]),[i,p]=c.useState([]),[g,l]=c.useState([]),[y,b]=c.useState(!1),P=u(),C=c.useMemo(()=>re.filter(a=>{const f=a.name.toLowerCase().includes(o.toLowerCase())||a.brand.toLowerCase().includes(o.toLowerCase()),S=!n||a.category===n,M=h.length===0||h.includes(a.brand),T=d.length===0||d.includes(a.volume),X=i.length===0||i.includes(a.packaging),Z=g.length===0||g.includes(a.unit);return f&&S&&M&&T&&X&&Z}),[o,n,h,d,i,g]),I=a=>{const f=P.find(S=>S.productId===a);return(f==null?void 0:f.quantity)||0},O=(a,f)=>{const S=I(a),M=S+f;M<=0?r(a,0):S===0?t(a,f):r(a,M)},B=()=>{j(""),m([]),N([]),p([]),l([])},L=[n,...h,...d,...i,...g].filter(Boolean).length,F=n?Ee[n]||[]:[];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 z-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-2xl font-bold text-primary-950",children:["Welcome back, ",s==null?void 0:s.businessName]}),e.jsx("p",{className:"text-primary-600",children:"What would you like to order today?"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:"search",value:o,onChange:a=>x(a.target.value),placeholder:"Search beverages...",className:"input-field pl-12 pr-16"}),e.jsxs("button",{onClick:()=>b(!y),className:`absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-lg transition-colors ${y?"bg-primary-950 text-white":"text-primary-400 hover:bg-primary-100"}`,children:[e.jsx(Ze,{className:"w-4 h-4"}),L>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:L})]})]}),y&&e.jsxs(w.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-primary-700 mb-2",children:"Category"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:De.map(a=>e.jsx("button",{onClick:()=>{j(n===a?"":a),m([])},className:`px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${n===a?"bg-primary-950 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:a},a))})]}),F.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-primary-700 mb-2",children:"Brand"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:F.map(a=>e.jsx("button",{onClick:()=>{m(f=>f.includes(a)?f.filter(S=>S!==a):[...f,a])},className:`px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${h.includes(a)?"bg-primary-950 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-primary-700 mb-2",children:"Volume"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Be.map(a=>e.jsx("button",{onClick:()=>{N(f=>f.includes(a)?f.filter(S=>S!==a):[...f,a])},className:`px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${d.includes(a)?"bg-primary-950 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:a},a))})]}),L>0&&e.jsxs("button",{onClick:B,className:"text-sm text-primary-600 hover:text-primary-950 font-medium",children:["Clear all filters (",L,")"]})]})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-primary-600",children:[C.length," product",C.length!==1?"s":""," found"]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:C.map(a=>{const f=I(a.id);return e.jsxs(w.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card p-4",children:[e.jsx("div",{className:"aspect-square bg-primary-50 rounded-xl mb-3 overflow-hidden",children:e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-950 text-sm leading-tight",children:a.name}),e.jsxs("p",{className:"text-xs text-primary-600",children:[a.volume," • ",a.packaging,a.packSize&&` • ${a.packSize}pcs`]})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold text-primary-950",children:["₦",a.price.toLocaleString()]}),f>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(a.id,-1),className:"w-8 h-8 bg-primary-100 hover:bg-primary-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(ne,{className:"w-4 h-4 text-primary-700"})}),e.jsx("span",{className:"font-medium text-primary-950 min-w-[20px] text-center",children:f}),e.jsx("button",{onClick:()=>O(a.id,1),className:"w-8 h-8 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>O(a.id,1),className:"w-8 h-8 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"sm:hidden space-y-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"font-bold text-primary-950",children:["₦",a.price.toLocaleString()]})}),f>0?e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("button",{onClick:()=>O(a.id,-1),className:"flex-1 h-10 bg-primary-100 hover:bg-primary-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(ne,{className:"w-4 h-4 text-primary-700"})}),e.jsx("span",{className:"font-medium text-primary-950 min-w-[40px] text-center text-lg",children:f}),e.jsx("button",{onClick:()=>O(a.id,1),className:"flex-1 h-10 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>O(a.id,1),className:"w-full h-10 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Add to Cart"})]})]})]})]},a.id)})}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-10 h-10 text-primary-400"})}),e.jsx("h3",{className:"text-lg font-medium text-primary-950 mb-2",children:"No products found"}),e.jsx("p",{className:"text-primary-600 mb-4",children:"Try adjusting your search or filters"}),L>0&&e.jsx("button",{onClick:B,className:"btn-secondary",children:"Clear Filters"})]})]})]})},us=()=>{const s=Y(),{getCartItemsWithDetails:t,updateQuantity:r,removeItem:u,getTotalPrice:o,getTotalItems:x}=W(),n=t(),j=o(),h=x(),m=j>5e3?0:500,d=j+m,N=(i,p)=>{p<=0?u(i):r(i,p)};return n.length===0?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/home"),className:"p-2 hover:bg-primary-100 rounded-xl transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-primary-700"})}),e.jsx("h1",{className:"text-xl font-bold text-primary-950",children:"Your Cart"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-20",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(ns,{className:"w-12 h-12 text-primary-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-primary-600 text-center mb-8",children:"Add some beverages to get started"}),e.jsx("button",{onClick:()=>s("/home"),className:"btn-primary",children:"Start Shopping"})]})]}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/home"),className:"p-2 hover:bg-primary-100 rounded-xl transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-primary-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-primary-950",children:"Your Cart"}),e.jsxs("p",{className:"text-sm text-primary-600",children:[h," items"]})]})]})}),e.jsx("div",{className:"px-6 py-6 pb-60",children:e.jsx("div",{className:"space-y-4",children:n.map(({productId:i,quantity:p,product:g})=>e.jsx(w.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"card p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-50 rounded-xl overflow-hidden flex-shrink-0",children:e.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-950 leading-tight",children:g.name}),e.jsxs("p",{className:"text-sm text-primary-600",children:[g.volume," • ",g.packaging,g.packSize&&` • Pack of ${g.packSize}`]})]}),e.jsx("button",{onClick:()=>u(i),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Fe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold text-primary-950",children:["₦",(g.price*p).toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N(i,p-1),className:"w-8 h-8 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium text-primary-950 min-w-[20px] text-center",children:p}),e.jsx("button",{onClick:()=>N(i,p+1),className:"w-8 h-8 bg-accent hover:bg-accent text-white rounded-lg flex items-center justify-center transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]})]})]})]})},i))})}),e.jsxs("div",{className:"fixed bottom-20 left-0 right-0 bg-white border-t border-primary-200 px-6 py-4 z-30",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-primary-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["₦",j.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-primary-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:m===0?"Free":`₦${m.toLocaleString()}`})]}),m===0&&e.jsx("p",{className:"text-xs text-accent",children:"Free delivery on orders above ₦5,000"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-primary-950 pt-2 border-t border-primary-200",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["₦",d.toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>s("/checkout"),className:"btn-primary w-full",children:"Checkout"})]})]})},ve="bever:client_orders:v1";async function we(){await new Promise(s=>setTimeout(s,80));try{const s=localStorage.getItem(ve);return s?JSON.parse(s):[]}catch(s){return console.error("Failed to read client orders from storage",s),[]}}async function ys(s){await new Promise(t=>setTimeout(t,120));try{const t=await we(),r={id:`ORD-${Math.floor(Math.random()*9e5+1e3)}`,createdAt:new Date().toISOString(),...s};return t.unshift(r),localStorage.setItem(ve,JSON.stringify(t)),r}catch(t){throw console.error("Failed to save client order",t),t}}const js=()=>{const s=Y(),{user:t}=E(),{getCartItemsWithDetails:r,getTotalPrice:u,clearCart:o}=W(),[x,n]=c.useState("transfer"),[j,h]=c.useState(!1),[m,d]=c.useState(!1),[N,i]=c.useState(!1),[p,g]=c.useState(!1),[l,y]=c.useState(!1),b=r(),P=u(),C=P>5e3?0:500,I=P+C,O={accountNumber:"1234567890",bankName:"Providus Bank",accountName:"Bever Payments"},B=()=>{navigator.clipboard.writeText(O.accountNumber),i(!0),setTimeout(()=>i(!1),2e3)},L=async()=>{h(!0);try{await new Promise(a=>setTimeout(a,2e3));try{const a={userId:(t==null?void 0:t.id)||"guest",items:b.map(({productId:f,quantity:S,product:M})=>({productId:f,quantity:S,price:M.price})),total:I,status:"Placed",paymentMethod:x==="transfer"?"Transfer":"Pay on Delivery",deliveryAddress:(t==null?void 0:t.businessAddress)||"",deliveredAt:null};await ys(a);try{const f=b.reduce((S,M)=>S+M.quantity,0);await Re({userName:(t==null?void 0:t.businessName)||(t==null?void 0:t.phoneNumber)||(t==null?void 0:t.beverCode)||"Guest",items:f,amount:I,status:"pending",paymentStatus:x==="transfer"?"pending":"completed",deliveryCategory:"standard"})}catch(f){console.warn("Failed to create admin order record",f)}}catch(a){console.error("Failed to persist client order",a)}o(),d(!0),setTimeout(()=>{s("/home")},3e3)}catch(a){console.error("Order failed:",a)}finally{h(!1)}},F=async()=>{g(!0);try{await new Promise(a=>setTimeout(a,5e3)),y(!0)}finally{g(!1)}};return c.useEffect(()=>{if(!l)return;const a="lottie-player-script";if(!document.getElementById(a)){const f=document.createElement("script");f.id=a,f.src="https://unpkg.com/@lottiefiles/lottie-player@1.5.7/dist/lottie-player.js",f.async=!0,document.body.appendChild(f)}},[l]),m?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center px-6",children:e.jsxs(w.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-200 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{className:"w-10 h-10 text-accent"})}),e.jsx("h2",{className:"text-2xl font-bold text-primary-950 mb-2",children:"Order Placed!"}),e.jsx("p",{className:"text-primary-600 mb-4",children:"Your order has been received and is being processed"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Redirecting to home..."})]})}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/cart"),className:"p-2 hover:bg-primary-100 rounded-xl transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-primary-700"})}),e.jsx("h1",{className:"text-xl font-bold text-primary-950",children:"Checkout"})]})}),e.jsxs("div",{className:"px-6 py-6 pb-32",children:[e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-primary-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary-950 mb-1",children:"Delivery Address"}),e.jsx("p",{className:"text-primary-700",children:t==null?void 0:t.businessName}),e.jsx("p",{className:"text-primary-600 text-sm",children:t==null?void 0:t.businessAddress}),e.jsxs("p",{className:"text-primary-600 text-sm",children:[t==null?void 0:t.ward,", Jalingo"]})]})]})}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h3",{className:"font-medium text-primary-950 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3",children:[b.map(({productId:a,quantity:f,product:S})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-primary-950",children:S.name}),e.jsxs("p",{className:"text-sm text-primary-600",children:[S.volume," • Qty: ",f]})]}),e.jsxs("span",{className:"font-medium text-primary-950",children:["₦",(S.price*f).toLocaleString()]})]},a)),e.jsxs("div",{className:"border-t border-primary-200 pt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-primary-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["₦",P.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-primary-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:C===0?"Free":`₦${C.toLocaleString()}`})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-primary-950 pt-2 border-t border-primary-200",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["₦",I.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h3",{className:"font-medium text-primary-950 mb-4",children:"Payment Method"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>n("transfer"),className:`w-full p-4 rounded-xl border-2 transition-all ${x==="transfer"?"border-primary-950 bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${x==="transfer"?"border-primary-950":"border-primary-300"}`,children:x==="transfer"&&e.jsx("div",{className:"w-2.5 h-2.5 bg-primary-950 rounded-full"})}),e.jsx(Xe,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-primary-950",children:"Bank Transfer"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Pay via bank transfer"})]})]})}),e.jsx("button",{onClick:()=>n("cash"),className:`w-full p-4 rounded-xl border-2 transition-all ${x==="cash"?"border-primary-950 bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${x==="cash"?"border-primary-950":"border-primary-300"}`,children:x==="cash"&&e.jsx("div",{className:"w-2.5 h-2.5 bg-primary-950 rounded-full"})}),e.jsx(Ye,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-primary-950",children:"Pay on Delivery"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Pay with cash when delivered"})]})]})})]}),x==="transfer"&&e.jsxs(w.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-4 bg-accent-50 border border-primary-200 rounded-xl",children:[e.jsx("h4",{className:"font-medium text-accent mb-3",children:"Transfer Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-accent",children:"Account Number:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-medium text-accent",children:O.accountNumber}),e.jsx("button",{onClick:B,className:"p-1 text-accent hover:text-accent transition-colors",children:N?e.jsx(q,{className:"w-4 h-4"}):e.jsx(Ne,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-accent",children:"Bank:"}),e.jsx("span",{className:"font-medium text-accent",children:O.bankName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-accent",children:"Account Name:"}),e.jsx("span",{className:"font-medium text-accent",children:O.accountName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-accent",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-accent",children:["₦",I.toLocaleString()]})]})]}),e.jsx("p",{className:"text-xs text-accent mt-3",children:"Transfer the exact amount to complete your order. Your order will be confirmed automatically."})]}),x==="transfer"&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:F,disabled:p,className:"w-full btn-primary flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Verifying..."]}):"I have made payment"})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-primary-200 px-6 py-4",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 16px)"},children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx("button",{onClick:L,disabled:j,className:"w-full btn-primary",children:j?"Processing Order...":`Place Order • ₦${I.toLocaleString()}`})})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 text-center",children:[e.jsx("lottie-player",{src:"/Lottie-Animation.json",background:"transparent",speed:"1",style:{width:"240px",height:"240px",margin:"0 auto"},autoplay:!0}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-primary-950",children:"Payment Verified"}),e.jsx("p",{className:"text-primary-600 mt-2",children:"We received your payment. Your order will be confirmed shortly."}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:()=>{y(!1),L()},className:"btn-primary",children:"Continue"})})]})})]})},bs=()=>{const{addItem:s}=W(),[t,r]=c.useState(""),[u,o]=c.useState(null),[x,n]=c.useState([]),[j,h]=c.useState(!0);c.useEffect(()=>{let l=!0;return(async()=>{h(!0);const y=await we();l&&(n(y),h(!1))})(),()=>{l=!1}},[]);const m=x.filter(l=>l.id.toLowerCase().includes(t.toLowerCase())),d=l=>{switch(l){case"Delivered":return"bg-primary-200 text-accent";case"Processing":return"bg-blue-100 text-blue-700";case"Placed":return"bg-orange-100 text-orange-700";case"Cancelled":return"bg-red-100 text-red-700";default:return"bg-primary-100 text-primary-700"}},N=l=>{switch(l){case"Delivered":return e.jsx(Ue,{className:"w-3 h-3"});case"Processing":return e.jsx($e,{className:"w-3 h-3"});case"Placed":return e.jsx(V,{className:"w-3 h-3"});case"Cancelled":return e.jsx(cs,{className:"w-3 h-3"});default:return e.jsx(V,{className:"w-3 h-3"})}},i=l=>{l.items.forEach(y=>{s(y.productId,y.quantity)}),alert("Items added to cart successfully!")},p=l=>{const y=new Date(l);return y.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"})+", "+y.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})},g=l=>({"eva-water-75cl-pack":"Eva Water 75cl Pack","coca-cola-33cl-pack":"Coca-Cola 33cl Pack","pepsi-33cl-pack":"Pepsi 33cl Pack","chivita-1l-pack":"Chivita Active Orange 1L","fanta-35cl-pack":"Fanta Orange 35cl Pack","eva-water-1.5l-pack":"Eva Water 1.5L Pack","monster-50cl-pack":"Monster Energy 50cl Pack","sprite-35cl-pack":"Sprite 35cl Pack"})[l]||"Unknown Product";return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-950",children:"Orders"}),e.jsx("p",{className:"text-primary-600",children:"Track your beverage orders"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400"}),e.jsx("input",{type:"text",value:t,onChange:l=>r(l.target.value),placeholder:"Search Order ID",className:"input-field pl-12"})]})]}),e.jsx("div",{className:"px-6 py-6 pb-32",children:j?e.jsx("div",{className:"text-center py-12",children:"Loading..."}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-10 h-10 text-primary-400"})}),e.jsx("h3",{className:"text-lg font-medium text-primary-950",children:"No orders found"}),e.jsx("p",{className:"text-primary-600",children:"You haven't placed any orders yet"})]}):e.jsx("div",{className:"space-y-4",children:m.map(l=>e.jsxs(w.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o(l),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono font-bold text-primary-950",children:l.id}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${d(l.status)}`,children:[N(l.status),l.status]})]}),e.jsx("p",{className:"text-sm text-primary-600",children:p(l.createdAt)})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"font-bold text-lg text-accent",children:["₦",l.total.toLocaleString()]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-primary-600",children:[l.items.length," item",l.items.length!==1?"s":""," •"," ",l.paymentMethod]}),e.jsxs("button",{onClick:y=>{y.stopPropagation(),i(l)},className:"flex items-center gap-2 px-3 py-1.5 bg-accent hover:bg-accent text-white text-sm font-medium rounded-lg transition-colors",children:[e.jsx(pe,{className:"w-4 h-4"}),"Reorder"]})]})]},l.id))})}),e.jsx(Q,{children:u&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end",onClick:()=>o(null),children:e.jsxs(w.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-t-3xl w-full max-h-[80vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-primary-100 px-6 py-4 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-primary-950",children:"Order Details"}),e.jsx("button",{onClick:()=>o(null),className:"w-10 h-10 bg-accent hover:bg-accent text-white rounded-full flex items-center justify-center transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-mono font-bold text-lg text-primary-950",children:u.id}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full ${d(u.status)}`,children:[N(u.status),u.status]})]}),e.jsx("p",{className:"text-primary-600",children:p(u.createdAt)}),u.deliveredAt&&e.jsxs("p",{className:"text-sm text-accent",children:["Delivered: ",p(u.deliveredAt)]})]})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-primary-950",children:"Items Ordered"}),u.items.map((l,y)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"font-medium text-primary-950",children:[l.quantity,"x ",g(l.productId)]})}),e.jsxs("span",{className:"font-medium text-primary-950",children:["₦",(l.price*l.quantity).toLocaleString()]})]},y))]}),e.jsxs("div",{className:"border-t border-primary-200 pt-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-primary-700",children:"Payment Method:"}),e.jsx("span",{className:"font-medium text-primary-950",children:u.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-primary-700",children:"Delivery Address:"}),e.jsx("span",{className:"font-medium text-primary-950 text-right max-w-[200px]",children:u.deliveryAddress})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-accent pt-2 border-t border-primary-200",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["₦",u.total.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>i(u),className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Reorder"]}),e.jsxs("button",{className:"btn-secondary flex-1 flex items-center justify-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5"}),"Rate Order"]})]})]})]})})})]})},J=({isOpen:s,onClose:t,title:r,children:u,size:o="md"})=>{const x={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};return e.jsx(Q,{children:s&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:n=>n.stopPropagation(),className:`bg-white rounded-2xl p-6 w-full ${x[o]} max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-primary-950",children:r}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",children:e.jsx(oe,{className:"w-5 h-5 text-primary-600"})})]}),u]})})})},fs=({isOpen:s,onClose:t,user:r,onSave:u})=>{const[o,x]=c.useState({businessName:(r==null?void 0:r.businessName)||"",customerCategory:(r==null?void 0:r.customerCategory)||"",businessAddress:(r==null?void 0:r.businessAddress)||"",ward:(r==null?void 0:r.ward)||"",subArea:(r==null?void 0:r.subArea)||""}),[n,j]=c.useState(!1),[h,m]=c.useState({}),d=()=>{const i={};return o.businessName.trim()||(i.businessName="Business name is required"),o.customerCategory.trim()||(i.customerCategory="Customer category is required"),o.businessAddress.trim()||(i.businessAddress="Business address is required"),o.ward.trim()||(i.ward="Ward is required"),m(i),Object.keys(i).length===0},N=async()=>{if(d()){j(!0);try{await u(o),t()}catch(i){console.error("Failed to update profile:",i)}finally{j(!1)}}};return e.jsx(J,{isOpen:s,onClose:t,title:"Edit Profile",size:"lg",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-950 mb-2",children:[e.jsx(me,{className:"w-4 h-4 inline mr-2"}),"Business Name"]}),e.jsx("input",{type:"text",value:o.businessName,onChange:i=>x(p=>({...p,businessName:i.target.value})),className:`input-field ${h.businessName?"border-red-500":""}`,placeholder:"Enter your business name"}),h.businessName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.businessName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-950 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 inline mr-2"}),"Customer Category"]}),e.jsxs("select",{value:o.customerCategory,onChange:i=>x(p=>({...p,customerCategory:i.target.value})),className:`input-field ${h.customerCategory?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Retailer",children:"Retailer"}),e.jsx("option",{value:"Wholesaler",children:"Wholesaler"}),e.jsx("option",{value:"Restaurant",children:"Restaurant"}),e.jsx("option",{value:"Hotel",children:"Hotel"}),e.jsx("option",{value:"Supermarket",children:"Supermarket"})]}),h.customerCategory&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.customerCategory})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-950 mb-2",children:[e.jsx(K,{className:"w-4 h-4 inline mr-2"}),"Business Address"]}),e.jsx("input",{type:"text",value:o.businessAddress,onChange:i=>x(p=>({...p,businessAddress:i.target.value})),className:`input-field ${h.businessAddress?"border-red-500":""}`,placeholder:"Enter your business address"}),h.businessAddress&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.businessAddress})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-950 mb-2",children:"Ward"}),e.jsx("input",{type:"text",value:o.ward,onChange:i=>x(p=>({...p,ward:i.target.value})),className:`input-field ${h.ward?"border-red-500":""}`,placeholder:"Enter ward"}),h.ward&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.ward})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-950 mb-2",children:"Sub Area"}),e.jsx("input",{type:"text",value:o.subArea,onChange:i=>x(p=>({...p,subArea:i.target.value})),className:"input-field",placeholder:"Enter sub area"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:t,className:"btn-secondary flex-1",disabled:n,children:"Cancel"}),e.jsx("button",{onClick:N,className:"btn-primary flex-1",disabled:n,children:n?"Saving...":"Save Changes"})]})]})})},te=({isOpen:s,onClose:t,title:r,currentPhoto:u,onSave:o,aspectRatio:x="square"})=>{const[n,j]=c.useState(null),[h,m]=c.useState(null),[d,N]=c.useState(!1),i=c.useRef(null),p=b=>{if(b&&b.type.startsWith("image/")){m(b);const P=new FileReader;P.onload=C=>{var I;j((I=C.target)==null?void 0:I.result)},P.readAsDataURL(b)}},g=b=>{b.preventDefault();const P=b.dataTransfer.files[0];P&&p(P)},l=async()=>{if(h){N(!0);try{await o(h),t(),j(null),m(null)}catch(b){console.error("Failed to upload photo:",b)}finally{N(!1)}}},y=x==="cover"?"aspect-video":"aspect-square";return e.jsx(J,{isOpen:s,onClose:t,title:r,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`${y} border-2 border-dashed border-primary-200 rounded-xl overflow-hidden bg-primary-50 relative`,onDrop:g,onDragOver:b=>b.preventDefault(),children:[n||u?e.jsx("img",{src:n||u,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-primary-600",children:[e.jsx(R,{className:"w-12 h-12 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Drop image here or click to upload"}),e.jsx("p",{className:"text-xs text-primary-400 mt-1",children:"JPG, PNG up to 5MB"})]}),(n||u)&&e.jsx("button",{onClick:()=>{j(null),m(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>{var b;return(b=i.current)==null?void 0:b.click()},className:"w-full flex items-center justify-center gap-2 p-3 border-2 border-primary-200 text-primary-700 rounded-xl hover:bg-primary-50 transition-colors",children:[e.jsx(ze,{className:"w-5 h-5"}),"Choose Photo"]}),e.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:b=>{var C;const P=(C=b.target.files)==null?void 0:C[0];P&&p(P)}}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"btn-secondary flex-1",disabled:d,children:"Cancel"}),e.jsx("button",{onClick:l,className:"btn-primary flex-1",disabled:!h||d,children:d?"Uploading...":"Save Photo"})]})]})})},gs=({isOpen:s,onClose:t,settings:r,onSave:u})=>{const[o,x]=c.useState(r),[n,j]=c.useState(!1),h=async()=>{j(!0);try{await u(o),t()}catch(m){console.error("Failed to save settings:",m)}finally{j(!1)}};return e.jsx(J,{isOpen:s,onClose:t,title:"Settings & Preferences",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 font-medium text-primary-950 mb-3",children:[e.jsx(_e,{className:"w-5 h-5"}),"Notifications"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(o.notifications).map(([m,d])=>e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-primary-700",children:[m==="orderUpdates"&&"Order Updates",m==="promotions"&&"Promotions & Offers",m==="deliveryAlerts"&&"Delivery Alerts"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:N=>x(i=>({...i,notifications:{...i.notifications,[m]:N.target.checked}})),className:"sr-only"}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors ${d?"bg-accent":"bg-primary-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform duration-200 ease-in-out ${d?"translate-x-5":"translate-x-1"} mt-1`})})]})]},String(m)))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 font-medium text-primary-950 mb-3",children:[e.jsx(ss,{className:"w-5 h-5"}),"App Preferences"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-primary-700 mb-2",children:"Language"}),e.jsxs("select",{value:o.app.language,onChange:m=>x(d=>({...d,app:{...d.app,language:m.target.value}})),className:"input-field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ha",children:"Hausa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-primary-700 mb-2",children:"Default Delivery Time"}),e.jsxs("select",{value:o.app.defaultDeliveryTime,onChange:m=>x(d=>({...d,app:{...d.app,defaultDeliveryTime:m.target.value}})),className:"input-field",children:[e.jsx("option",{value:"morning",children:"Morning (8AM - 12PM)"}),e.jsx("option",{value:"afternoon",children:"Afternoon (12PM - 6PM)"}),e.jsx("option",{value:"evening",children:"Evening (6PM - 9PM)"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 font-medium text-primary-950 mb-3",children:[e.jsx(le,{className:"w-5 h-5"}),"Privacy"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-primary-700",children:"Profile Visibility"}),e.jsxs("select",{value:o.privacy.profileVisibility,onChange:m=>x(d=>({...d,privacy:{...d.privacy,profileVisibility:m.target.value}})),className:"input-field w-32",children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"})]})]}),e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-primary-700",children:"Data Sharing"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:o.privacy.dataSharing,onChange:m=>x(d=>({...d,privacy:{...d.privacy,dataSharing:m.target.checked}})),className:"sr-only"}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors ${o.privacy.dataSharing?"bg-accent":"bg-primary-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform duration-200 ease-in-out ${o.privacy.dataSharing?"translate-x-5":"translate-x-1"} mt-1`})})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 font-medium text-primary-950 mb-3",children:[e.jsx(ls,{className:"w-5 h-5"}),"Delivery Preferences"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-primary-700 mb-2",children:"Default Address"}),e.jsx("input",{type:"text",value:o.delivery.defaultAddress,onChange:m=>x(d=>({...d,delivery:{...d.delivery,defaultAddress:m.target.value}})),className:"input-field",placeholder:"Enter default delivery address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-primary-700 mb-2",children:"Special Instructions"}),e.jsx("textarea",{value:o.delivery.specialInstructions,onChange:m=>x(d=>({...d,delivery:{...d.delivery,specialInstructions:m.target.value}})),className:"input-field",rows:3,placeholder:"Any special delivery instructions..."})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:t,className:"btn-secondary flex-1",disabled:n,children:"Cancel"}),e.jsx("button",{onClick:h,className:"btn-primary flex-1",disabled:n,children:n?"Saving...":"Save Settings"})]})]})})},Ns=({isOpen:s,onClose:t,onConfirm:r})=>e.jsx(J,{isOpen:s,onClose:t,title:"Confirm Logout",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(He,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-primary-950 mb-2",children:"Are you sure you want to logout?"}),e.jsx("p",{className:"text-primary-600 text-sm",children:"You'll need to sign in again to access your account. Any unsaved changes will be lost."})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:t,className:"btn-primary",children:"Cancel"}),e.jsxs("button",{onClick:r,className:"btn-secondary text-red-600 hover:bg-red-50 hover:text-red-700",children:[e.jsx(ye,{className:"w-4 h-4 mr-2 inline"}),"Logout"]})]})]})}),vs=({completion:s})=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-primary-950",children:"Profile Completion"}),e.jsxs("span",{className:"text-2xl font-bold text-accent",children:[s.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-100 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-accent to-accent h-3 rounded-full transition-all duration-500",style:{width:`${s.percentage}%`}})}),s.missingFields.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-primary-950 mb-2",children:"Complete your profile:"}),s.missingFields.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ke,{className:"w-4 h-4 text-primary-400"}),e.jsx("span",{className:"text-primary-700",children:t})]},r))]}),s.percentage===100&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-accent bg-accent-50 p-3 rounded-lg",children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Profile Complete! You're all set."})]})]}),ws=()=>{const{user:s,logout:t,updateUser:r}=E(),{hasPin:u,setPin:o,verifyPin:x,changePin:n}=de(),[j,h]=c.useState(!1),[m,d]=c.useState(!1),[N,i]=c.useState(!1),[p,g]=c.useState(!1),[l,y]=c.useState(!1),[b,P]=c.useState(!1),[C,I]=c.useState(!1),[O,B]=c.useState(!1),[L,F]=c.useState("set"),[a,f]=c.useState({currentPin:"",newPin:"",confirmPin:"",showPins:!1}),[S,M]=c.useState(""),[T,X]=c.useState(new Set),[Z,Pe]=c.useState({notifications:{orderUpdates:!0,promotions:!0,deliveryAlerts:!0},app:{theme:"light",language:"en",defaultDeliveryTime:"morning"},privacy:{profileVisibility:"public",dataSharing:!1},delivery:{defaultAddress:(s==null?void 0:s.businessAddress)||"",specialInstructions:""}}),Ce={percentage:85,missingFields:["Shop Photo","Cover Photo"],completedSections:["Business Info","Contact","Verification"]},xe=()=>{s!=null&&s.beverCode&&(navigator.clipboard.writeText(s.beverCode),B(!0),setTimeout(()=>B(!1),2e3))},ee=v=>{const A=new Set(T);A.has(v)?A.delete(v):A.add(v),X(A)},ke=()=>{switch(s==null?void 0:s.verificationStatus){case"Verified":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-200 text-accent text-sm font-medium rounded-full",children:[e.jsx(q,{className:"w-4 h-4"}),"Verified"]});case"Agent Visit":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[e.jsx(le,{className:"w-4 h-4"}),"Agent Visit"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 text-sm font-medium rounded-full",children:[e.jsx(le,{className:"w-4 h-4"}),"Pending"]})}},he=v=>{F(v),I(!0),f({currentPin:"",newPin:"",confirmPin:"",showPins:!1}),M("")},Se=v=>v.length<4?"weak":v.length<6?"medium":"strong",Ae=()=>{if(L==="set"||L==="change"){const v=Se(a.newPin),A={weak:"bg-red-500",medium:"bg-orange-500",strong:"bg-accent"};return e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex gap-1 mb-1",children:[e.jsx("div",{className:`h-2 flex-1 rounded ${v==="weak"?A.weak:"bg-primary-200"}`}),e.jsx("div",{className:`h-2 flex-1 rounded ${v==="medium"||v==="strong"?A[v]:"bg-primary-200"}`}),e.jsx("div",{className:`h-2 flex-1 rounded ${v==="strong"?A.strong:"bg-primary-200"}`})]}),e.jsxs("p",{className:"text-xs text-primary-600",children:["PIN Strength: ",v.charAt(0).toUpperCase()+v.slice(1)]})]})}return null},Ie=()=>{if(M(""),L==="set"){if(a.newPin.length<4){M("PIN must be at least 4 digits");return}if(a.newPin!==a.confirmPin){M("PINs do not match");return}o(a.newPin),I(!1)}else if(L==="change"){if(!x(a.currentPin)){M("Current PIN is incorrect");return}if(a.newPin.length<4){M("New PIN must be at least 4 digits");return}if(a.newPin!==a.confirmPin){M("New PINs do not match");return}n(a.currentPin,a.newPin)?I(!1):M("Failed to change PIN")}};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-primary-900 to-primary-950 relative overflow-hidden",style:{backgroundImage:s!=null&&s.coverPhoto?`url(${s.coverPhoto})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[(s==null?void 0:s.coverPhoto)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("button",{onClick:()=>d(!0),className:"absolute top-4 right-4 p-2 bg-black/50 text-white rounded-lg hover:bg-black/70 transition-colors",children:e.jsx(R,{className:"icon-responsive"})})]}),e.jsx("div",{className:"absolute -bottom-16 left-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full p-1 shadow-lg",children:e.jsx("div",{className:"w-full h-full bg-primary-100 rounded-full flex items-center justify-center overflow-hidden",children:s!=null&&s.avatar?e.jsx("img",{src:s.avatar,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(me,{className:"w-10 h-10 text-primary-600"})})}),e.jsx("button",{onClick:()=>i(!0),className:"absolute -bottom-1 -right-1 p-2 bg-accent text-white rounded-full shadow-lg hover:bg-accent transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"pt-20 px-6 pb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-950 mb-1",children:s==null?void 0:s.businessName}),e.jsx("p",{className:"text-primary-600 mb-2",children:s==null?void 0:s.customerCategory}),ke()]}),e.jsx("button",{onClick:()=>h(!0),className:"p-2 text-primary-600 hover:text-primary-950 hover:bg-primary-50 rounded-lg transition-colors",children:e.jsx(rs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary-950",children:"127"}),e.jsx("div",{className:"text-sm sm:text-xs text-primary-600",children:"Orders"})]}),e.jsxs("div",{className:"text-center p-3 bg-accent-50 rounded-xl cursor-pointer hover:bg-primary-200 transition-colors",onClick:xe,children:[e.jsx("div",{className:"text-lg sm:text-2xl md:text-3xl font-bold text-accent truncate",children:s==null?void 0:s.beverCode}),e.jsxs("div",{className:"text-sm sm:text-xs text-accent flex items-center justify-center gap-1",children:[O?e.jsx(q,{className:"w-3 h-3 sm:w-4 sm:h-4"}):e.jsx(Ne,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"truncate",children:"Bever Code"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary-950",children:"4.8"}),e.jsx("div",{className:"text-sm sm:text-xs text-primary-600",children:"Rating"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(vs,{completion:Ce}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-medium text-primary-950 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid-responsive-2 gap-3",children:[e.jsxs("button",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-xl hover:bg-primary-100 transition-colors",onClick:xe,children:[e.jsx(is,{className:"icon-responsive text-primary-600"}),e.jsx("span",{className:"text-responsive font-medium text-primary-950",children:"Share Code"})]}),e.jsxs("button",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-xl hover:bg-primary-100 transition-colors",children:[e.jsx(ts,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-primary-950",children:"Get Help"})]}),e.jsxs("button",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-xl hover:bg-primary-100 transition-colors",children:[e.jsx(ue,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-primary-950",children:"Rate App"})]}),e.jsxs("button",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-xl hover:bg-primary-100 transition-colors",children:[e.jsx(es,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-primary-950",children:"Referrals"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>ee("business"),className:"w-full flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-primary-950",children:"Business Information"}),e.jsx(w.div,{animate:{rotate:T.has("business")?180:0},transition:{duration:.2},children:e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-r-2 border-b-2 border-primary-400 rotate-45 -translate-y-0.5"})})})]}),e.jsx(w.div,{initial:!1,animate:{height:T.has("business")?"auto":0,opacity:T.has("business")?1:0},className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{className:"w-5 h-5 text-primary-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-950",children:s==null?void 0:s.businessAddress}),e.jsxs("p",{className:"text-sm text-primary-600",children:[s==null?void 0:s.ward,", Jalingo"]}),(s==null?void 0:s.subArea)&&e.jsx("p",{className:"text-sm text-primary-600",children:s.subArea})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"text-primary-950",children:s==null?void 0:s.phoneNumber})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>ee("shop"),className:"w-full flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-primary-950",children:"Shop Photo"}),e.jsx(w.div,{animate:{rotate:T.has("shop")?180:0},transition:{duration:.2},children:e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-r-2 border-b-2 border-primary-400 rotate-45 -translate-y-0.5"})})})]}),e.jsx(w.div,{initial:!1,animate:{height:T.has("shop")?"auto":0,opacity:T.has("shop")?1:0},className:"overflow-hidden",children:s!=null&&s.shopPhoto?e.jsxs("div",{className:"aspect-video bg-primary-50 rounded-xl overflow-hidden relative mb-4",children:[e.jsx("img",{src:s.shopPhoto,alt:"Shop",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>g(!0),className:"absolute top-2 right-2 p-2 bg-black/50 text-white rounded-lg hover:bg-black/70 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>g(!0),className:"w-full aspect-video bg-primary-50 rounded-xl flex items-center justify-center hover:bg-primary-100 transition-colors mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"w-8 h-8 text-primary-400 mx-auto mb-2"}),e.jsx("p",{className:"text-primary-600 text-sm font-medium",children:"Add Shop Photo"})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>ee("pin"),className:"w-full flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-primary-950",children:"Transaction PIN"}),e.jsx(w.div,{animate:{rotate:T.has("pin")?180:0},transition:{duration:.2},children:e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-r-2 border-b-2 border-primary-400 rotate-45 -translate-y-0.5"})})})]}),e.jsx(w.div,{initial:!1,animate:{height:T.has("pin")?"auto":0,opacity:T.has("pin")?1:0},className:"overflow-hidden",children:e.jsx("div",{className:"space-y-3 pb-4",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent-50 rounded-xl",children:[e.jsx(G,{className:"w-5 h-5 text-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-accent font-medium",children:"PIN is secure"}),e.jsx("p",{className:"text-xs text-accent",children:"Last changed: 2 days ago"})]})]}),e.jsx("button",{onClick:()=>he("change"),className:"btn-secondary w-full",children:"Change PIN"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-xl",children:[e.jsx(G,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-orange-800 font-medium",children:"No PIN set - Secure your transactions"})]}),e.jsx("button",{onClick:()=>he("set"),className:"btn-primary w-full",children:"Set Transaction PIN"})]})})})]}),e.jsx("div",{className:"card",children:e.jsxs("button",{onClick:()=>y(!0),className:"w-full flex items-center gap-3 p-4 hover:bg-primary-50 rounded-xl transition-colors",children:[e.jsx(qe,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"font-medium text-primary-950",children:"Settings & Preferences"})]})}),e.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-center gap-3 p-4 text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),e.jsx(fs,{isOpen:j,onClose:()=>h(!1),user:s,onSave:r}),e.jsx(te,{isOpen:m,onClose:()=>d(!1),title:"Update Cover Photo",currentPhoto:s==null?void 0:s.coverPhoto,aspectRatio:"cover",onSave:v=>{const A=URL.createObjectURL(v);r({coverPhoto:A})}}),e.jsx(te,{isOpen:N,onClose:()=>i(!1),title:"Update Profile Photo",currentPhoto:s==null?void 0:s.avatar,aspectRatio:"square",onSave:v=>{const A=URL.createObjectURL(v);r({avatar:A})}}),e.jsx(te,{isOpen:p,onClose:()=>g(!1),title:"Update Shop Photo",currentPhoto:s==null?void 0:s.shopPhoto,aspectRatio:"cover",onSave:v=>{const A=URL.createObjectURL(v);r({shopPhoto:A})}}),e.jsx(gs,{isOpen:l,onClose:()=>y(!1),settings:Z,onSave:Pe}),e.jsx(Ns,{isOpen:b,onClose:()=>P(!1),onConfirm:t}),e.jsx(J,{isOpen:C,onClose:()=>I(!1),title:L==="set"?"Set Transaction PIN":"Change Transaction PIN",children:e.jsxs("div",{className:"space-y-4",children:[L==="change"&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.showPins?"text":"password",value:a.currentPin,onChange:v=>f(A=>({...A,currentPin:v.target.value})),placeholder:"Current PIN",className:"input-field pr-12",maxLength:6}),e.jsx("button",{type:"button",onClick:()=>f(v=>({...v,showPins:!v.showPins})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-400",children:a.showPins?e.jsx(z,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.showPins?"text":"password",value:a.newPin,onChange:v=>f(A=>({...A,newPin:v.target.value})),placeholder:L==="set"?"Enter PIN":"New PIN",className:"input-field pr-12",maxLength:6}),e.jsx("button",{type:"button",onClick:()=>f(v=>({...v,showPins:!v.showPins})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-400",children:a.showPins?e.jsx(z,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.showPins?"text":"password",value:a.confirmPin,onChange:v=>f(A=>({...A,confirmPin:v.target.value})),placeholder:"Confirm PIN",className:"input-field pr-12",maxLength:6}),e.jsx("button",{type:"button",onClick:()=>f(v=>({...v,showPins:!v.showPins})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-400",children:a.showPins?e.jsx(z,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})})]}),Ae(),S&&e.jsx("p",{className:"text-red-500 text-sm",children:S}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>I(!1),className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:Ie,className:"btn-primary flex-1",children:L==="set"?"Set PIN":"Change PIN"})]})]})})]})},Ps=()=>{const{isAuthenticated:s}=E(),{isSettingRequired:t}=de();return e.jsxs(e.Fragment,{children:[e.jsxs(Oe,{children:[e.jsx(D,{path:"/login",element:s?e.jsx($,{to:"/home"}):e.jsx(ms,{})}),e.jsx(D,{path:"/register",element:s?e.jsx($,{to:"/home"}):e.jsx(hs,{})}),e.jsx(D,{path:"/",element:e.jsx($,{to:s?"/home":"/login"})}),e.jsxs(D,{path:"/",element:e.jsx(Ge,{children:e.jsx(ds,{})}),children:[e.jsx(D,{path:"home",element:e.jsx(ps,{})}),e.jsx(D,{path:"cart",element:e.jsx(us,{})}),e.jsx(D,{path:"checkout",element:e.jsx(js,{})}),e.jsx(D,{path:"orders",element:e.jsx(bs,{})}),e.jsx(D,{path:"profile",element:e.jsx(ws,{})})]}),e.jsx(D,{path:"*",element:e.jsx($,{to:"/",replace:!0})})]}),e.jsx(os,{isOpen:t})]})},Ss=()=>e.jsx(We,{children:e.jsx(Je,{children:e.jsx(Ve,{children:e.jsx(Ps,{})})})});export{Ss as default};
